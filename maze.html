<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maze Maze Daze</title>
    <link rel="stylesheet" href="maze.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 100 100%27><text y=%27.9em%27 font-size=%2790%27>🌀</text></svg>">
</head>

<body tabindex="0">

    <!-- ГЛАВНОЕ МЕНЮ -->
    <div id="main-menu" class="main-menu">
        <div class="menu-content">
            <h1 class="game-title">MAZE MAZE DAZE</h1>
            <p class="subtitle">MMD</p>
            <div class="menu-buttons" id="menu-buttons"></div>
            <div class="menu-footer">
                <button onclick="changeLanguage()">🌐 RU/EN</button>
                <span id="version">v1.3</span>
            </div>
        </div>
    </div>
    <!-- maze.html -->
    <div class="header-controls">
        <button onclick="backToMenu()" class="menu-btn">🏠 МЕНЮ</button>
        <button onclick="toggleDebugPanel()" class="debug-btn">⚙️ ОТЛАДКА</button>
    </div>

    <!-- Панель отладки -->
<div id="debug-panel" class="side-panel" style="display: none;">
    <h3>🛠️ ИНСТРУМЕНТЫ ОТЛАДКИ</h3>
    
    <button onclick="toggleFogDebug()">🌫️ Туман войны: <span id="fog-status">ВКЛ</span></button>
    <button onclick="checkPathToExit()">🔍 Проверить путь до выхода</button>
    <button onclick="engine.level++; setupGame()">⏭️ Следующий уровень</button>
    <button onclick="engine.resetProgress(); setupGame()">🔄 Сброс прогресса</button>
    
    <hr>
    <button onclick="toggleDebugPanel()">❌ ЗАКРЫТЬ</button>
</div>
    <!-- ИГРА -->
    <div id="game-container" class="app-container" style="display:none">
        <div class="main-content">
            <div class="center-content">
                <div id="win" class="win-msg">WAY OUT FOUND!</div>
                <div class="canvas-wrapper">
                    <canvas id="maze"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <!-- СКРИПТЫ -->
    <script src="utils/constants.js"></script>
    <script src="utils/error-handler.js"></script>
    <script src="utils/performance.js"></script>
    <script src="utils/interfaces.js"></script>
    <script src="entities/maze-registry.js"></script>
    <script src="utils/maze-i18n.js"></script>
    <script src="ui/maze-save.js"></script>
    <script src="ui/maze-menu.js"></script>
    <script src="entities/maze-sprite.js"></script>
    
    <!-- Новые модули архитектуры -->
    <script src="core/map-engine.js"></script>
    <script src="entities/entity-manager.js"></script>
    <script src="core/fog-manager.js"></script>
    <script src="ui/player-renderer.js"></script>
    
    <script src="core/maze-engine.js"></script>
    <script src="ui/render-system.js"></script>
    <script src="ui/maze-renderer.js"></script>
    <script src="ui/maze-input.js"></script>
    <script src="audio/maze-audio.js"></script>
    <script src="core/maze-physics.js"></script>
    <script src="ui/maze-story.js"></script>
    <script src="core/Game.js"></script>
    <script src="maze-main.js"></script>
</body>

</html>