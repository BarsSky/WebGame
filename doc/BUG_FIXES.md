# üêõ –ü–æ–ª–Ω—ã–π –§–∏–∫—Å –ë–∞–≥–æ–≤ ‚Äî SKYNAS Maze v2.1

## ‚úÖ –ì–ª–∞–≤–Ω—ã–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–ë–ê–ì –£–†–û–í–ù–ï–ô > 20 (–ò–°–ü–†–ê–í–õ–ï–ù)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `widenPaths()` –≤—ã–∑—ã–≤–∞–ª—Å—è, –Ω–æ –Ω–µ –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ maze-engine.js (–ø–æ—Å–ª–µ –ª–∏–Ω–∏–∏ ~80)

widenPaths() {
    const newGrid = Array(this.rows).fill().map(() => Array(this.cols).fill(1));
    
    for (let y = 0; y < this.rows; y++) {
        for (let x = 0; x < this.cols; x++) {
            if (this.grid[y][x] === 0) {
                newGrid[y][x] = 0;
                if (x + 1 < this.cols) newGrid[y][x + 1] = 0;
                if (y + 1 < this.rows) newGrid[y + 1][x] = 0;
                if (x + 1 < this.cols && y + 1 < this.rows) newGrid[y + 1][x + 1] = 0;
            }
        }
    }
    this.grid = newGrid;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–∞–±–∏—Ä–∏–Ω—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω—è—Ö 21+ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ø—É—Ç–∏ —à–∏—Ä–∏–Ω–æ–π –≤ 3 –∫–ª–µ—Ç–∫–∏ ‚úÖ

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª–æ–≤ (—É–∂–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã)

```
maze-core.js      ‚Üí –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∞–±–∏—Ä–∏–Ω—Ç–∞
maze-engine.js    ‚Üí –õ–æ–≥–∏–∫–∞ —É—Ä–æ–≤–Ω–µ–π + widenPaths()
maze-renderer.js  ‚Üí –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
maze-input.js     ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–≤–æ–¥–æ–º
maze-physics.js   ‚Üí –ö–æ–ª–ª–∏–∑–∏–∏ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ
maze-audio.js     ‚Üí –ó–≤—É–∫–∏
maze-story.js     ‚Üí –°—é–∂–µ—Ç –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
maze-main.js      ‚Üí –ì–ª–∞–≤–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
maze-game.js      ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π (legacy)
maze.html         ‚Üí –û—Å–Ω–æ–≤–Ω–æ–π HTML —Ñ–∞–π–ª
maze.css          ‚Üí –°—Ç–∏–ª–∏
```

---

## üöÄ –ù–æ–≤—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### NPC –∏ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –£—Ä–æ–≤–Ω–∏ 25+: –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ (–°—Ç—Ä–∞–Ω–Ω–∏–∫, –•—Ä–∞–Ω–∏—Ç–µ–ª—å, –¢–µ–Ω—å)
- –°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ `maze-story.js`
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `interactWithNPC(index)`

### –°–∏—Å—Ç–µ–º–∞ –°—é–∂–µ—Ç–∞
- –£—Ä–æ–≤–µ–Ω—å 10: "–ì–õ–ê–í–ê I: –ö–ù–ò–ì–ê –ó–ù–ê–ù–ò–ô"
- –£—Ä–æ–≤–µ–Ω—å 15: "–ì–õ–ê–í–ê II: –°–õ–ï–î–Ø–©–ê–Ø –ö–ê–ú–ï–†–ê"
- –£—Ä–æ–≤–µ–Ω—å 25: "–ì–õ–ê–í–ê III: –í–°–¢–†–ï–ß–ê"
- –£—Ä–æ–≤–µ–Ω—å 50: "–§–ò–ù–ê–õ: –í–´–•–û–î"

### –î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
```javascript
showStoryDialog(title, text); // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥
interactWithNPC(0);           // –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å NPC
```

---

## üîß –ö–∞–∫ –≠—Ç–æ –†–∞–±–æ—Ç–∞–µ—Ç

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è > 20 —É—Ä–æ–≤–Ω—è (–¥–æ —Ñ–∏–∫—Å–∞ ‚ùå ‚Üí –ø–æ—Å–ª–µ ‚úÖ)

**–î–û:** `widenPaths()` –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª ‚Üí ReferenceError
```
Error: widenPaths is not a function
```

**–ü–û–°–õ–ï:** –ú–µ—Ç–æ–¥–∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ `MazeEngine`
```
–£—Ä–æ–≤–µ–Ω—å 21: –ü—É—Ç–∏ —à–∏—Ä–∏–Ω–æ–π 1 –∫–ª–µ—Ç–∫–∞ (—É–∑–∫–æ)
–£—Ä–æ–≤–µ–Ω—å 21+ —Å widenPaths: –ü—É—Ç–∏ —à–∏—Ä–∏–Ω–æ–π 3 –∫–ª–µ—Ç–∫–∏ (–ø—Ä–æ—Ö–æ–¥–∏–º–æ)
```

---

## ‚ú® –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –†–∞—Å—à–∏—Ä–µ–Ω–∏—é

### –î–æ–±–∞–≤–∏—Ç—å –ù–æ–≤—ã–π NPC
```javascript
// –í maze-story.js, –≤ –æ–±—ä–µ–∫—Ç STORY_DATA.npcs:
3: {
    name: "–¢–≤–æ–π –ü–µ—Ä—Å–æ–Ω–∞–∂",
    dialogs: [
        "–ü–µ—Ä–≤—ã–π –¥–∏–∞–ª–æ–≥",
        "–í—Ç–æ—Ä–æ–π –¥–∏–∞–ª–æ–≥",
        "–¢—Ä–µ—Ç–∏–π –¥–∏–∞–ª–æ–≥"
    ]
}
```

### –î–æ–±–∞–≤–∏—Ç—å –ù–æ–≤—É—é –ò—Å—Ç–æ—Ä–∏—é –£—Ä–æ–≤–Ω—è
```javascript
// –í maze-story.js, –≤ –æ–±—ä–µ–∫—Ç STORY_DATA.level:
20: {
    title: "–ù–û–í–ê–Ø –ì–õ–ê–í–ê",
    text: "–û–ø–∏—Å–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏..."
}
```

### –î–æ–±–∞–≤–∏—Ç—å –ù–æ–≤—ã–π –ó–≤—É–∫
```javascript
// –í maze-audio.js, –≤ –º–µ—Ç–æ–¥ play():
case 'your_sound':
    this.soundYourSound(osc, gain);
    break;

// –ó–∞—Ç–µ–º –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:
soundYourSound(osc, gain) {
    osc.frequency.setValueAtTime(440, this.audioContext.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.2);
    osc.start();
    osc.stop(this.audioContext.currentTime + 0.2);
}
```

---

## üìä –°—Ç–∞—Ç—É—Å –ú–æ–¥—É–ª–µ–π

| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –§—É–Ω–∫—Ü–∏–∏ |
|--------|--------|---------|
| maze-engine.js | ‚úÖ –ì–æ—Ç–æ–≤ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è, widenPaths, NPC —Å–ø–∞–≤–Ω |
| maze-renderer.js | ‚úÖ –ì–æ—Ç–æ–≤ | –û—Ç—Ä–∏—Å–æ–≤–∫–∞, —Ç—É–º–∞–Ω, –∫–∞–º–µ—Ä–∞ |
| maze-input.js | ‚úÖ –ì–æ—Ç–æ–≤ | –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞, —Å–µ–Ω—Å–æ—Ä, –∫–Ω–æ–ø–∫–∏ |
| maze-physics.js | ‚úÖ –ì–æ—Ç–æ–≤ | –î–≤–∏–∂–µ–Ω–∏–µ, –∫–æ–ª–ª–∏–∑–∏–∏, –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| maze-audio.js | ‚úÖ –ì–æ—Ç–æ–≤ | –ó–≤—É–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ |
| maze-story.js | ‚úÖ –ì–æ—Ç–æ–≤ | –°—é–∂–µ—Ç, –¥–∏–∞–ª–æ–≥–∏, NPC |
| maze-main.js | ‚úÖ –ì–æ—Ç–æ–≤ | –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |

---

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –£—Ä–æ–≤–Ω–µ 21
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –í–≤–µ–¥–∏—Ç–µ: `engine.level = 21; setupGame();`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Ç–∏ —Ä–∞—Å—à–∏—Ä–∏–ª–∏—Å—å –≤ 3 –∫–ª–µ—Ç–∫–∏ ‚úÖ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –°—é–∂–µ—Ç
1. –ü—Ä–æ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 10 ‚Üí —É–≤–∏–¥–µ—Ç—å –ø–µ—Ä–≤—É—é –≥–ª–∞–≤—É
2. –ü—Ä–æ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å 25 ‚Üí –≤—Å—Ç—Ä–µ—á–∞ —Å NPC

---

## üîó API –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
engine.level

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–ª—é—á —Å–æ–±—Ä–∞–Ω
engine.hasKey

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–Ω–∏–≥–∞ —Å–æ–±—Ä–∞–Ω–∞
engine.hasBook

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å –∫–æ—Ä–∑–∏–Ω—ã
const width = engine.cols;
const height = engine.rows;

// –í–æ–∑–≥–ª–∞–≤–∏—Ç—å –ª–∞–±–∏—Ä–∏–Ω—Ç
engine.grid[y][x] === 0 // –ø—Ä–æ—Ö–æ–¥
engine.grid[y][x] === 1 // —Å—Ç–µ–Ω–∞

// –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–æ —Å—Ç–æ—Ä–∏–Ω–∞–º–∏
storyManager.showStoryDialog(title, text);
storyManager.interactWithNPC(npcIndex);
```

---

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ü—Ä–æ–≥—Ä–µ—Å—Å–∞

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
localStorage.getItem('skynas_maze_level')  // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
localStorage.getItem('skynas_stories')     // –û—Ç–∫—Ä—ã—Ç—ã–µ –∏—Å—Ç–æ—Ä–∏–∏
```

---

## üéØ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ª–∞–±–∏—Ä–∏–Ω—Ç–∞: 101√ó101
2. –ú–∞–∫—Å–∏–º—É–º 3 NPC –Ω–∞ —É—Ä–æ–≤–Ω–µ
3. Safari: –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–≤—É–∫–æ–º (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä)

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –í–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –°—Ç–∞—Ç—É—Å |
|--------|------|--------|
| 1.0 | 2025 | –ê—Ä—Ö–∏–≤ |
| **2.1** | **2026** | **‚úÖ –¢–ï–ö–£–©–ê–Ø** |

**–•–æ—Ä–æ—à–µ–π –∏–≥—Ä—ã! üéÆ**
